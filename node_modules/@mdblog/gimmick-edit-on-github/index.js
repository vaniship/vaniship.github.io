define(['jquery/dist/jquery.min'], function ($) {
  $('a[data-gimmick-edit-on-github]').each(function (index, el) {
    var $el = $(el)
    var text = $el.html() || 'Edit'
    var href = $el.attr('data-href')
    var params = href.split('#')
    var userName = params[0] || location.host.replace(/.\github\.io$/, '')
    var branch = params[1] || 'master'
    var filePath = location.hash.replace(/^#!\//, '')
    href = 'https://github.com/' + userName + '/' + userName + '.github.io/edit/' + branch + '/content/' + filePath
    $(el)
      .attr('data-gimmick-edit-on-github', null)
      .attr('data-href', null)
      .attr('href', href)
      .html(text)
  })
})
