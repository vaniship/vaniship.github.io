/* eslint-disable camelcase */
define([
  'jquery/dist/jquery.min',
  'blueimp-md5/js/md5.min'
], function ($, md5) {
  'use strict'

  if (location.protocol === 'file:') {
    var ajax = $.ajax
    $.ajax = function () {
      var options = arguments[0]
      var hash = md5(options.url.replace(/^\//, ''))
      options.crossDomain = true
      options.dataType = 'jsonp'
      options.jsonpCallback = 'jsonpcallback_' + hash
      options.url = 'mock/' + hash + '.js'
      return ajax.apply($, arguments)
    }
  }
});
